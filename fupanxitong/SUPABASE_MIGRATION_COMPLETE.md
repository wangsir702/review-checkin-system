# ğŸ‰ Supabase è¿ç§»å®Œæˆï¼

æ­å–œï¼ä½ çš„å¤ç›˜ç³»ç»Ÿå·²ç»å®Œå…¨è¿ç§»åˆ° Supabase äº‘æ•°æ®åº“ã€‚

## âœ… å·²å®Œæˆçš„å·¥ä½œ

### 1. åŸºç¡€è®¾æ–½ âœ“
- âœ… å®‰è£…äº† `@supabase/supabase-js`
- âœ… é…ç½®äº†ç¯å¢ƒå˜é‡ï¼ˆ`.env`ï¼‰
- âœ… åˆ›å»ºäº† Supabase å®¢æˆ·ç«¯ï¼ˆ`src/lib/supabaseClient.js`ï¼‰
- âœ… å®ç°äº†è®¤è¯çŠ¶æ€ç®¡ç†ï¼ˆ`src/lib/auth.js`ï¼‰
- âœ… åˆ›å»ºäº†æ•°æ®æœåŠ¡å±‚ï¼ˆ`src/lib/dataService.js`ï¼‰

### 2. æ•°æ®åº“è®¾è®¡ âœ“
- âœ… åˆ›å»ºäº† `reviews` è¡¨ç»“æ„ï¼ˆSQLå·²æä¾›ï¼‰
- âœ… åˆ›å»ºäº† `check_ins` è¡¨ç»“æ„ï¼ˆSQLå·²æä¾›ï¼‰
- âœ… é…ç½®äº† Row Level Security (RLS) ç­–ç•¥
- âœ… æ·»åŠ äº†ç´¢å¼•ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½

### 3. ç”¨æˆ·è®¤è¯ âœ“
- âœ… ç™»å½•/æ³¨å†Œé¡µé¢ï¼ˆ`src/views/Auth.vue`ï¼‰
- âœ… è·¯ç”±å®ˆå«ä¿æŠ¤
- âœ… ç”¨æˆ·ä¿¡æ¯æ˜¾ç¤º
- âœ… ç™»å‡ºåŠŸèƒ½
- âœ… å¯†ç é‡ç½®åŠŸèƒ½

### 4. é¡µé¢è¿ç§» âœ“
- âœ… **Reviews** - å¤ç›˜è®°å½•é¡µé¢å®Œå…¨è¿ç§»åˆ° Supabase
- âœ… **Checkin** - æ‰“å¡æ—¥å†é¡µé¢å®Œå…¨è¿ç§»åˆ° Supabase
- âœ… **Dashboard** - æ•°æ®ç»Ÿè®¡é¡µé¢å®Œå…¨è¿ç§»åˆ° Supabase

### 5. ç”¨æˆ·ä½“éªŒä¼˜åŒ– âœ“
- âœ… åŠ è½½çŠ¶æ€æŒ‡ç¤ºå™¨
- âœ… é”™è¯¯æç¤ºå¼¹çª—
- âœ… ä¿å­˜/åˆ é™¤çŠ¶æ€åé¦ˆ
- âœ… é˜²æ­¢é‡å¤æäº¤

## ğŸš€ ç°åœ¨å¼€å§‹ä½¿ç”¨ï¼

### æ­¥éª¤ 1ï¼šé…ç½® Supabase

1. **åˆ›å»º Supabase é¡¹ç›®**
   - è®¿é—® https://supabase.com/dashboard
   - åˆ›å»ºæ–°é¡¹ç›®

2. **è·å– API å¯†é’¥**
   - è¿›å…¥ Project Settings â†’ API
   - å¤åˆ¶ Project URL å’Œ anon/public key

3. **æ›´æ–° `.env` æ–‡ä»¶**
   ```env
   VITE_SUPABASE_URL=https://your-project-id.supabase.co
   VITE_SUPABASE_ANON_KEY=your-anon-key-here
   ```

4. **åˆ›å»ºæ•°æ®åº“è¡¨**
   - æ‰“å¼€ Supabase SQL Editor
   - æ‰§è¡Œ `supabase/create-tables.sql`
   - æ‰§è¡Œ `supabase/rls-policies.sql`

ğŸ“– **è¯¦ç»†æ­¥éª¤è¯·æŸ¥çœ‹**: `supabase/README.md`

### æ­¥éª¤ 2ï¼šå¯åŠ¨åº”ç”¨

```bash
# é‡å¯å¼€å‘æœåŠ¡å™¨ï¼ˆè®©ç¯å¢ƒå˜é‡ç”Ÿæ•ˆï¼‰
npm run dev
```

### æ­¥éª¤ 3ï¼šæ³¨å†Œè´¦æˆ·

1. è®¿é—® http://localhost:3000
2. ä½ ä¼šè¢«è‡ªåŠ¨è·³è½¬åˆ°ç™»å½•é¡µ
3. ç‚¹å‡»"æ³¨å†Œ"æ ‡ç­¾
4. è¾“å…¥é‚®ç®±å’Œå¯†ç ï¼ˆå¯†ç è‡³å°‘6ä½ï¼‰
5. æ³¨å†ŒæˆåŠŸï¼

âš ï¸ **æ³¨æ„**ï¼šé»˜è®¤æƒ…å†µä¸‹ Supabase éœ€è¦é‚®ç®±éªŒè¯ã€‚å¦‚æœä½ æƒ³å¿«é€Ÿæµ‹è¯•ï¼Œå¯ä»¥åœ¨ Supabase Dashboard ä¸­å…³é—­é‚®ç®±éªŒè¯åŠŸèƒ½ï¼ˆAuthentication â†’ Providers â†’ Email â†’ å…³é—­ "Confirm email"ï¼‰

### æ­¥éª¤ 4ï¼šå¼€å§‹ä½¿ç”¨

ç™»å½•åä½ å¯ä»¥ï¼š
- ğŸ“Š **æ•°æ®ç»Ÿè®¡** - æŸ¥çœ‹å¤ç›˜å’Œæ‰“å¡æ•°æ®
- ğŸ“ **å¤ç›˜è®°å½•** - åˆ›å»ºã€ç¼–è¾‘ã€æœç´¢å¤ç›˜
- ğŸ“… **æ‰“å¡æ—¥å†** - æ¯æ—¥æ‰“å¡ï¼ŒæŸ¥çœ‹è¿ç»­å¤©æ•°

## ğŸ”„ æ•°æ®è¿ç§»è¯´æ˜

### localStorage â†’ Supabase

**æ—§æ•°æ®ä¸ä¼šè‡ªåŠ¨è¿ç§»**ã€‚å¦‚æœä½ ä¹‹å‰ä½¿ç”¨è¿‡ localStorage ç‰ˆæœ¬å¹¶æœ‰é‡è¦æ•°æ®ï¼š

1. åœ¨æµè§ˆå™¨æ§åˆ¶å°æ‰§è¡Œï¼š
   ```javascript
   // å¯¼å‡ºæ—§æ•°æ®
   const reviews = JSON.parse(localStorage.getItem('review_system_reviews') || '[]')
   const checkins = JSON.parse(localStorage.getItem('review_system_checkins') || '[]')
   console.log('Reviews:', reviews)
   console.log('Checkins:', checkins)
   ```

2. å¤åˆ¶è¾“å‡ºçš„æ•°æ®
3. ç™»å½•åˆ°æ–°ç³»ç»Ÿåï¼Œæ‰‹åŠ¨é‡æ–°åˆ›å»º

## ğŸ“ é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ supabaseClient.js    # Supabase å®¢æˆ·ç«¯é…ç½®
â”‚   â”œâ”€â”€ auth.js               # è®¤è¯çŠ¶æ€ç®¡ç†
â”‚   â””â”€â”€ dataService.js        # æ•°æ®æœåŠ¡å±‚ï¼ˆCRUDæ“ä½œï¼‰
â”œâ”€â”€ views/
â”‚   â”œâ”€â”€ Auth.vue              # ç™»å½•/æ³¨å†Œé¡µé¢
â”‚   â”œâ”€â”€ Dashboard.vue         # æ•°æ®ç»Ÿè®¡ï¼ˆå·²è¿ç§»ï¼‰
â”‚   â”œâ”€â”€ Reviews.vue           # å¤ç›˜è®°å½•ï¼ˆå·²è¿ç§»ï¼‰
â”‚   â””â”€â”€ Checkin.vue           # æ‰“å¡æ—¥å†ï¼ˆå·²è¿ç§»ï¼‰
â”œâ”€â”€ components/
â”‚   â””â”€â”€ MarkdownEditor.vue    # Markdown ç¼–è¾‘å™¨
â”œâ”€â”€ App.vue                   # ä¸»å¸ƒå±€ï¼ˆå«ç”¨æˆ·ä¿¡æ¯ï¼‰
â””â”€â”€ main.js                   # è·¯ç”±é…ç½®ï¼ˆå«å®ˆå«ï¼‰
```

## ğŸ¨ æ–°å¢åŠŸèƒ½

### è®¤è¯ç³»ç»Ÿ
- âœ¨ ç”¨æˆ·æ³¨å†Œå’Œç™»å½•
- âœ¨ ä¼šè¯æŒä¹…åŒ–ï¼ˆè‡ªåŠ¨ç™»å½•ï¼‰
- âœ¨ å¯†ç é‡ç½®åŠŸèƒ½
- âœ¨ å®‰å…¨çš„æ•°æ®éš”ç¦»

### æ•°æ®å®‰å…¨
- ğŸ”’ æ¯ä¸ªç”¨æˆ·åªèƒ½è®¿é—®è‡ªå·±çš„æ•°æ®ï¼ˆRLSï¼‰
- ğŸ”’ å¯†ç åŠ å¯†å­˜å‚¨
- ğŸ”’ JWT ä»¤ç‰Œè®¤è¯

### ç”¨æˆ·ä½“éªŒ
- â³ åŠ è½½çŠ¶æ€æŒ‡ç¤º
- âš ï¸ å‹å¥½çš„é”™è¯¯æç¤º
- ğŸ’¾ è‡ªåŠ¨ä¿å­˜çŠ¶æ€
- ğŸš« é˜²æ­¢é‡å¤æäº¤

## ğŸ› å¸¸è§é—®é¢˜

### Q: çœ‹åˆ° "Missing Supabase environment variables" é”™è¯¯
**A**: æ£€æŸ¥ `.env` æ–‡ä»¶æ˜¯å¦å­˜åœ¨å¹¶å¡«å†™äº†æ­£ç¡®çš„å€¼ã€‚è®°å¾—é‡å¯å¼€å‘æœåŠ¡å™¨ï¼

### Q: ç™»å½•åçœ‹ä¸åˆ°æ•°æ®
**A**: æ£€æŸ¥ï¼š
1. æ•°æ®åº“è¡¨æ˜¯å¦æ­£ç¡®åˆ›å»ºï¼ˆæŸ¥çœ‹ Supabase Table Editorï¼‰
2. RLS ç­–ç•¥æ˜¯å¦æ­£ç¡®é…ç½®
3. æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯

### Q: æ³¨å†Œåæ— æ³•ç™»å½•
**A**: å¦‚æœå¯ç”¨äº†é‚®ç®±éªŒè¯ï¼Œéœ€è¦å…ˆç‚¹å‡»éªŒè¯é‚®ä»¶ä¸­çš„é“¾æ¥ã€‚æˆ–è€…åœ¨ Supabase Dashboard ä¸­å…³é—­é‚®ç®±éªŒè¯ã€‚

### Q: å¦‚ä½•æŸ¥çœ‹æ•°æ®åº“ä¸­çš„æ•°æ®ï¼Ÿ
**A**: åœ¨ Supabase Dashboard â†’ Table Editor ä¸­å¯ä»¥æŸ¥çœ‹æ‰€æœ‰æ•°æ®ã€‚

### Q: å¦‚ä½•é‡ç½®æ‰€æœ‰æ•°æ®ï¼Ÿ
**A**: åœ¨ Supabase SQL Editor ä¸­æ‰§è¡Œï¼š
```sql
DELETE FROM check_ins WHERE user_id = auth.uid();
DELETE FROM reviews WHERE user_id = auth.uid();
```

## ğŸ“š ç›¸å…³æ–‡æ¡£

- `supabase/README.md` - Supabase è¯¦ç»†è®¾ç½®æŒ‡å—
- `supabase/create-tables.sql` - æ•°æ®åº“è¡¨ç»“æ„
- `supabase/rls-policies.sql` - å®‰å…¨ç­–ç•¥é…ç½®
- `.env.example` - ç¯å¢ƒå˜é‡æ¨¡æ¿

## ğŸ¯ ä¸‹ä¸€æ­¥

ä½ å¯ä»¥ç»§ç»­å¼€å‘ï¼š
- ğŸ“§ é‚®ä»¶é€šçŸ¥
- ğŸ“± ç§»åŠ¨ç«¯é€‚é…ä¼˜åŒ–
- ğŸ“Š æ›´å¤šæ•°æ®å¯è§†åŒ–
- ğŸŒ™ æ·±è‰²æ¨¡å¼
- ğŸ“¤ æ•°æ®å¯¼å‡ºåŠŸèƒ½
- ğŸ” å…¨æ–‡æœç´¢
- ğŸ·ï¸ æ›´å¤šæ ‡ç­¾åŠŸèƒ½

---

**ğŸ‰ å¼€å§‹ä½ çš„å¤ç›˜ä¹‹æ—…å§ï¼**

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ `supabase/README.md` æˆ–æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°çš„é”™è¯¯ä¿¡æ¯ã€‚
